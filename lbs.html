<!DOCTYPE html>
<html>
<head>
    <title></title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1,user-scalable=no" />
    <link rel="stylesheet" href="style/diy.css" />
</head>
<body>


<div style="height:inherit;border:1px solid gray" id="container"></div>
<script type="text/javascript" src="http://api.map.baidu.com/api?v=1.5&ak=FE8666dd669bda487a5acdc685225074"></script>
<script type="text/javascript" src="js/jquery-1.4.4.min.js"></script>
<script type="text/javascript">
    (function () {
        var y = 23.142789;
        var x = 113.301823;
        var map = new BMap.Map("container");
        map.centerAndZoom(new BMap.Point(x, y), 19);
        map.enableScrollWheelZoom();
        var marker = new BMap.Marker(new BMap.Point(x, y));
        map.addOverlay(marker);
        var licontent = "<b>汇华商贸</b><br>";
        licontent += "<span><strong>地址：</strong>先烈中路80号</span><br>";
        licontent += "<span><strong>电话：</strong>(010)63095718,(010)63095630</span><br>";
        licontent += "<span class=\"input\"><strong></strong><input class=\"outset\" type=\"text\" name=\"origin\" value=\"北京站\"/><input class=\"outset-but\" type=\"button\" value=\"公交\" onclick=\"gotobaidu(1)\" /><input class=\"outset-but\" type=\"button\" value=\"驾车\"  onclick=\"gotobaidu(2)\"/><a class=\"gotob\" href=\"url=\"http://api.map.baidu.com/direction?destination=latlng:" + marker.getPosition().lat + "," + marker.getPosition().lng + "|name:天安门" + "®ion=北京" + "&output=html\" target=\"_blank\"></a></span>";
        var hiddeninput = "<input type=\"hidden\" value=\"" + '北京路' + "\" name=\"region\" /><input type=\"hidden\" value=\"html\" name=\"output\" /><input type=\"hidden\" value=\"driving\" name=\"mode\" /><input type=\"hidden\" value=\"latlng:" + marker.getPosition().lat + "," + marker.getPosition().lng + "|name:天安门" + "\" name=\"destination\" />";
        var content1 = "<form id=\"gotobaiduform\" action=\"http://api.map.baidu.com/direction\" target=\"_blank\" method=\"get\">" + licontent + hiddeninput + "</form>";
        var opts1 = { width: 300 };

        var infoWindow = new BMap.InfoWindow(content1, opts1);
        marker.openInfoWindow(infoWindow);
        marker.addEventListener('click', function () {
            marker.openInfoWindow(infoWindow);
        });

    })();
    function gotobaidu(type) {
        if ($.trim($("input[name=origin]").val()) == "") {
            alert("请输入起点！");
            return;
        } else {
            if (type == 1) {
                $("input[name=mode]").val("transit");
                $("#gotobaiduform")[0].submit();
            } else if (type == 2) {
                $("input[name=mode]").val("driving");
                $("#gotobaiduform")[0].submit();
            }
        }
    }
</script>
</body>
</html>